<div class="vmenu">
	<h3>Quickjump</h3>
	<ul>
		<li><a href="/web/templates"><span>-top-</span></li>
		#foreach( $template in $templates )
		<li><a href="/web/templates#$template.name"><span>$template.name</span></a></li>
		#end
	</ul>
</div>

<div class="hmenu_left">
	<a class="backButton" href="/web"><span>Back to Home</span> </a> <a
		class="backButton" href="/web/packages"><span>Packages</span> </a>
		<a class="backButton" href="/web/templates/add"><span>Add new Template</span> </a>
</div>
<div class="info_container">
	<p>This page shows the current status of the templates managed by the
		CloudConductor. The information shown here reflects the state of the
		template not those of the individual hosts.</p>
</div>

#foreach ($template in $templates)
<div class="segment_container">
	<h2><a name="$template.name">$template.name</a>
		<span class="defaultSize"> 
			<a class="button" href="/web/templates/$template.name/edit"><span>Edit</span></a>
			<a class="button" href="/web/templates/$template.name/delete"><span>Delete</span></a>
		</span>
	</h2>
	
	<div class="segment_content">
		<h3>Yum-Server : $template.yum</h3>
		<h3>Autoupdate : #if($template.autoupdate) on #else off #end</h3>	
		<h3>Installed Packages</h3>
		<form action="/web/templates/$template.name#$template.name" method="post">
			<table class="install_status">
				<tr>
				#if( $template.rpms.isEmpty() )
					<th>There are no packages installed on this host.</th>
					<th />
					<th />
				#else
					<th width="45%" >Package name</th>
					<th width="5%"/>
					<th width="45%" >Version</th>
				#end
				<th width="5%"><a
						href="/web/templates/$template.name/package/add"><img
							src="$imgdir/add_att.png" alt="Add Package" name="Add Package"
							title="Add Package" /> </a>
				</th>
				</tr>
			#foreach( $version in $template.rpms )
				<tr>
					<td>$version.name</td>
					#if ($version.update) 
						<td class="button"><input type="checkbox" name="updatePackage" value="$version.name"></td>
						<td class="versionUpdate">$version.version</td>
					#elseif($version.noexist)
						<td class="button"><input type="checkbox" name="updatePackage" value="$version.name" checked="checked"></td>
						<td class="versionNot_ok">$version.version</td>
					#else
						<td class="button" />
						<td class="versionOk">$version.version</td>
					#end
					<td class="button"><input type="checkbox" name="deletePackage" value="$version.name"></td>
				</tr>
			#end
			#if( !$template.rpms.isEmpty() )
				<tr>
					<td />
					<td class="button"><input type="submit" name="update" value="update" /></td>
					<td />
					<td class="button"><input type="submit" name="uninstall" value="uninstall" /></<td>
				</tr>
			#end
			</table>
		</form>
		
		<h3>Hosts using this template</h3>
		<table class="install_status">
			<tr>
			#if( $template.hosts.isEmpty() )
				<th>There are no hosts available.</th>
				<th />
			#else
				<th width="40%" >Host name</th>
				<th width="50%" >last seen</th>
			#end
				<th width="10%" />
			</tr>
			#foreach ( $host in $template.hosts )
				#if ($host.hoststate == "warning")
				<tr class="warning">
				#elseif ($host.hoststate == "error")
				<tr class="error">
				#else
				<tr class="ok">
				#end
					<td>$host.name</td>
					<td>$host.lastseen </td>
					<td class="button"><a href="/web/hosts#$host.name">Details</a></td>
				</tr>
			#end
			<tr>
			<tr>
				<th width="40%" >Default State on startup</th>
				<th width="50%" />
				<th class="button"><a href="/web/templates/defaultservicestate#$template.name">Details</a></td>
			</tr>
		</table>
	</div>
</div>
#end